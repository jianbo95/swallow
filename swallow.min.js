var Util,Config={};Config.openTag="{{",Config.closeTag="}}",Config.compress=!0,Util={},Util.foreach=function(a,b){if(void 0!=a)for(var c=0;c<a.length;c++)b(a[c])},Util.error=function(a){console.log("Error: "+a)},Util.compress=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(!Config.compress)return a;for(b=a,c="[s ]*\\r?\\n",d=["[	 ]*{{each [^\r\n]*}}"+c,"[	 ]*{{/each}}"+c,"[	 ]*{{if [^\r\n]*}"+c,"[	 ]*{{else if [^\n]*}"+c,"[	 ]*{{/if}}"+c,"[	 ]*{{else}}"+c,"[	 ]*{{set [^\r\n]*}}"+c],e=0;e<d.length;e++)if(f=d[e],g="gm",h=new RegExp(f,g),i=b.match(h),void 0!=i)for(j=0;j<i.length;j++)k=i[j],l=k.replace(/\r?\n$/,""),m=l.replace(/^[\t ]*/,""),b=b.replace(k,m);return b},Util.Map={model:"$model",loopTimes:0,loop:function(){this.loopTimes++},loopClose:function(){this.loopTimes--},toMap:function(a){return 0==this.loopTimes?this.model+"."+a:a}},Util.parser=function(a){var f,g,h,i,j,k,b=Util.Map,c=a.split(" "),d=c.shift(),e=c.join(" ");switch(d){case"if":f=b.toMap(e),a="if("+f+"){";break;case"else":"if"===c.shift()?(f=c.join(" "),f=b.toMap(f),a="}else if("+f+"){"):a="}else{";break;case"/if":a="}";break;case"each":g=c[0]||"$data",h=c[1]||"as",i=c[2]||"$value",j=c[3]||"$index","as"!==h&&Util.error("{{"+a+"}} is invalid!"),g=b.toMap(g),a="$each("+g+",function("+i+","+j+"){\n",a+="var $value = "+i+";\n",a+="var $index = "+j+";",b.loop();break;case"/each":"/each"!=a&&Util.error("{{"+a+"}} is invalid!"),b.loopClose(),a="});";break;case"set":a=b.toMap(e),0!=b.loopTimes&&(a="$value."+a);break;default:k=b.toMap(a),a="="+k}return a},function(a,b){var c=a.foreach,d=function(){var d,e,f;return self={},d=function(b){var c=function(b){return b=a.parser(b),0===b.indexOf("=")&&(b="$out+"+b+";"),b+"\n"},d=function(a){var b=function(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"};return a="$out+="+b(a)+";"+"\n"};return"html"==b.type?d(b.code):c(b.code)},e=function(a){var e,f,g,h;return new Array,e=new Array,f=function(a,b){this.code=a,this.type=b},g=function(a){return new f(a,"html")},h=function(a){return new f(a,"logic")},c(a.split(b.openTag),function(a){var c=a.split(b.closeTag);1===c.length?e.push(g(c[0])):(e.push(h(c[0])),c[1]&&e.push(g(c[1])))}),e},f=function(a,b){var e=function(){var c,e,b="";for(c=0;c<a.length;c++)e=a[c],b+=d(e);return b},f="'use strict';var $out = '';",g="return String($out)",h=f+e()+g,i=new Function("$model","$each",h),j=String(i(b,c));return j},self.render=function(b,c){var d=a.compress(b),g=e(d),h=f(g,c);return h},self}();"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?exports.Swallow=d:"function"==typeof define&&define.amd?define(["exports"],function(){return d}):window.Swallow=d}(Util,Config);